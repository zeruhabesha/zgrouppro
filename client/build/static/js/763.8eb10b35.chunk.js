"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[763],{9763:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var o=t(5043),n=t(6213),r=t(1460),s=t(1273),l=t(449),i=t(4282),c=t(5284),d=t(2462),m=(t(8421),t(579));const p=()=>{var e,a,t,p,h,u,y,x,g,j;const[b,A]=(0,o.useState)([]),[C,v]=(0,o.useState)([]),[f,w]=(0,o.useState)(""),[N,D]=(0,o.useState)({name:"",email:"",password:"",companyType:"",category:"",subcategory:[],status:"Active",address:"",phoneNumber:"",website:"",description:"",socialMedia:{facebook:"",twitter:"",linkedin:"",instagram:"",telegram:""},promotionStartDate:"",promotionEndDate:"",paymentDetails:{paymentMethod:"",paymentDate:"",paymentAmount:0},contactPerson:{name:"",email:"",phoneNumber:""},logoUrl:""}),[k,S]=(0,o.useState)([]),[P,E]=(0,o.useState)([]),[L,I]=(0,o.useState)(null),[M,U]=(0,o.useState)(!1),[G,T]=(0,o.useState)(!1),[$,_]=(0,o.useState)(null),[z,B]=(0,o.useState)(!0),[F,q]=(0,o.useState)(!1),[R,H]=(0,o.useState)([]),[W,O]=(0,o.useState)(1),[Y]=(0,o.useState)(6),[J,K]=(0,o.useState)([]),[Q,V]=(0,o.useState)(!1),[X,Z]=(0,o.useState)(!1),[ee,ae]=(0,o.useState)(null),[te,oe]=(0,o.useState)(!1),[ne,re]=(0,o.useState)(""),[se,le]=(0,o.useState)(!1),[ie,ce]=(0,o.useState)(null),[de,me]=(0,o.useState)(null),pe=localStorage.getItem("token");(0,o.useEffect)((()=>{he(),ge()}),[]),(0,o.useEffect)((()=>{N.category?ve(N.category):E([])}),[N.category]);const he=async()=>{try{const e=await n.A.get("/api/companies",{headers:{Authorization:`Bearer ${pe}`}});A(e.data)}catch(e){console.error("Error fetching companies:",e)}};(0,o.useEffect)((()=>{N.category&&ve(N.category)}),[N.category]);(0,o.useEffect)((()=>{(async()=>{try{const e=await n.A.get("/api/companies");H(e.data)}catch(e){console.error("Error fetching announcements:",e)}})()}),[]);const ue=W*Y,ye=ue-Y,xe=R.filter((e=>e&&e.name&&e.name.toLowerCase().includes(f.toLowerCase()))).slice(ye,ue),ge=async()=>{try{const e=await n.A.get("/api/categories",{headers:{Authorization:`Bearer ${pe}`}});S(e.data)}catch(e){console.error("Error fetching categories:",e)}finally{B(!1)}},je=e=>{const{name:a,value:t,type:o,files:n}=e.target;if("file"===o)D((e=>({...e,[a]:n[0]})));else if("subcategory"===a){const a=Array.from(e.target.selectedOptions,(e=>e.value));D((e=>({...e,subcategory:a})))}else D("category"===a?e=>({...e,category:t,subcategory:[]}):e=>({...e,[a]:t}))},be=e=>{const{name:a,value:t}=e.target;D((e=>({...e,socialMedia:{...e.socialMedia,[a]:t}})))},Ae=e=>{const{name:a,value:t}=e.target;D((e=>({...e,paymentDetails:{...e.paymentDetails,[a]:t}})))},Ce=(e,a)=>{const{value:t}=e.target;D((e=>({...e,contactPerson:{...e.contactPerson,[a]:t}})))};(0,o.useEffect)((()=>{console.log("Companies:",b)}),[b]),(0,o.useEffect)((()=>{console.log("Filtered Companies:",C)}),[C]),(0,o.useEffect)((()=>{(async()=>{try{const e=await n.A.get("/api/categories",{headers:{Authorization:`Bearer ${pe}`}});S(e.data)}catch(e){console.error("Error fetching categories",e)}finally{B(!1)}})()}),[]);const ve=async e=>{if(e)try{q(!0);const a=await n.A.get(`/api/categories/subcategories/${e}`,{headers:{Authorization:`Bearer ${pe}`}});E(a.data)}catch(a){console.error("Error fetching subcategories:",a)}finally{q(!1)}else E([])};return(0,m.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,m.jsx)(r.A,{}),(0,m.jsxs)("div",{className:"flex flex-grow",children:[(0,m.jsx)(s.A,{}),(0,m.jsx)("div",{className:"flex-grow p-4",children:(0,m.jsxs)("div",{className:"container mx-auto",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Company Management"}),(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)("input",{type:"text",value:f,onChange:e=>{const a=e.target.value||"";w(a),O(1)},placeholder:"Search companies...",className:"form-control mb-3"})}),(0,m.jsx)(i.A,{variant:"primary",onClick:()=>Z(!0),children:"Add New Company"}),(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 mt-4",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"Logo"}),(0,m.jsx)("th",{children:"Name"}),(0,m.jsx)("th",{children:"Email"}),(0,m.jsx)("th",{children:"Category"}),(0,m.jsx)("th",{children:"Status"}),(0,m.jsx)("th",{children:"Actions"})]})}),(0,m.jsx)("tbody",{children:xe.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:e.logoUrl&&(0,m.jsx)("img",{src:`/${e.logoUrl}`,className:"w-10 h-10 object-cover rounded-lg mb-4",alt:e.name})}),(0,m.jsx)("td",{children:e.name}),(0,m.jsx)("td",{children:e.email}),(0,m.jsx)("td",{children:e.companyType}),(0,m.jsx)("td",{children:e.status}),(0,m.jsxs)("td",{children:[(0,m.jsx)("button",{onClick:()=>(e=>{I(e),D({...e,category:e.category?e.category.name:""}),U(!0)})(e),className:"btn btn-primary btn-sm",children:"Edit"}),(0,m.jsx)("button",{onClick:()=>{_(e._id),T(!0)},className:"btn btn-danger btn-sm ml-2",children:"Delete"})]})]},e._id)))})]})]})}),(0,m.jsxs)(c.A,{show:X||M,onHide:()=>{U(!1),Z(!1),I(null),D({name:"",email:"",password:"",companyType:"",category:"",subcategory:[],status:"Active",address:"",phoneNumber:"",website:"",description:"",socialMedia:{facebook:"",twitter:"",linkedin:"",instagram:"",telegram:""},promotionStartDate:"",promotionEndDate:"",paymentDetails:{paymentMethod:"",paymentDate:"",paymentAmount:""},contactPerson:{name:"",email:"",phoneNumber:""},logoUrl:""})},children:[(0,m.jsx)(c.A.Header,{closeButton:!0,children:(0,m.jsx)(c.A.Title,{children:L?"Edit Company":"Add New Company"})}),(0,m.jsx)(c.A.Body,{children:(0,m.jsxs)(d.A,{onSubmit:L?async e=>{if(e.preventDefault(),L&&L._id)try{const e=new FormData,a={...N};a.password||delete a.password,N.logoUrl instanceof File?e.append("logoUrl",N.logoUrl):L.logoUrl&&e.append("logoUrl",L.logoUrl);for(const n in a)if("object"===typeof a[n])for(const t in a[n])e.append(`${n}.${t}`,a[n][t]);else e.append(n,a[n]);const t=await n.A.put(`/api/companies/${L._id}`,e,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"multipart/form-data"}}),o=b.map((e=>e._id===L._id?t.data.updatedCompany:e));A(o),U(!1),I(null),D({name:"",email:"",password:"",companyType:"",category:"",subcategory:[],status:"Active",address:"",phoneNumber:"",website:"",description:"",socialMedia:{facebook:"",twitter:"",linkedin:"",instagram:"",telegram:""},promotionStartDate:"",promotionEndDate:"",paymentDetails:{paymentMethod:"",paymentDate:"",paymentAmount:""},contactPerson:{name:"",email:"",phoneNumber:""},logoUrl:""})}catch(a){console.error("Error updating company:",a)}else console.error("Error updating company: No company selected for editing")}:async e=>{e.preventDefault();try{const e={name:N.name,email:N.email,password:N.password,companyType:N.companyType,category:N.category,subcategory:N.subcategory,status:N.status,address:N.address,phoneNumber:N.phoneNumber,website:N.website,description:N.description,socialMedia:N.socialMedia,promotionStartDate:N.promotionStartDate,promotionEndDate:N.promotionEndDate,paymentDetails:N.paymentDetails,contactPerson:N.contactPerson},a=new FormData;N.logoUrl instanceof File&&a.append("logoUrl",N.logoUrl);for(const o in e)if("object"===typeof e[o])for(const t in e[o])a.append(`${o}.${t}`,e[o][t]);else a.append(o,e[o]);const t=await n.A.post("/api/companies",a,{headers:{Authorization:`Bearer ${pe}`,"Content-Type":"multipart/form-data"}});A([...b,t.data.newCompany]),U(!1),D({socialMedia:{facebook:"",twitter:"",linkedin:"",instagram:"",telegram:""},paymentDetails:{paymentMethod:"",paymentDate:"",paymentAmount:0}})}catch(a){console.error("Error creating company",a),a.response&&a.response.data&&a.response.data.message?alert(`Failed to create company: ${a.response.data.message}`):alert("Failed to create company. Please try again.")}},children:[(0,m.jsxs)(d.A.Group,{controlId:"formCompanyName",children:[(0,m.jsx)(d.A.Label,{children:"Company Name"}),(0,m.jsx)(d.A.Control,{type:"text",name:"name",value:N.name,onChange:je,required:!0})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyEmail",children:[(0,m.jsx)(d.A.Label,{children:"Email"}),(0,m.jsx)(d.A.Control,{type:"email",name:"email",value:N.email,onChange:je,required:!0})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyPassword",children:[(0,m.jsx)(d.A.Label,{children:"Password"}),(0,m.jsx)(d.A.Control,{type:"password",name:"password",value:N.password,onChange:je,required:!L})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyPassword",children:[(0,m.jsx)(d.A.Label,{children:"Password"}),(0,m.jsx)(d.A.Control,{type:"password",name:"password",value:N.password,onChange:je,required:!L})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyType",children:[(0,m.jsx)(d.A.Label,{children:"Company Type"}),(0,m.jsx)(d.A.Control,{type:"text",name:"companyType",value:N.companyType,onChange:je,required:!0})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyCategory",children:[(0,m.jsx)(d.A.Label,{children:"Category"}),(0,m.jsxs)(d.A.Control,{as:"select",name:"category",value:N.category,onChange:je,required:!0,children:[(0,m.jsx)("option",{value:"",children:"Select Category"}),k.map((e=>(0,m.jsx)("option",{value:e._id,children:e.name},e._id)))]})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanySubcategory",children:[(0,m.jsx)(d.A.Label,{children:"Subcategory"}),(0,m.jsx)(d.A.Control,{as:"select",name:"subcategory",value:N.subcategory,onChange:je,multiple:!0,children:P.map(((e,a)=>(0,m.jsxs)("option",{value:e,children:[" ",e]},a)))})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyStatus",children:[(0,m.jsx)(d.A.Label,{children:"Status"}),(0,m.jsxs)(d.A.Control,{as:"select",name:"status",value:N.status,onChange:je,required:!0,children:[(0,m.jsx)("option",{value:"Active",children:"Active"}),(0,m.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyAddress",children:[(0,m.jsx)(d.A.Label,{children:"Address"}),(0,m.jsx)(d.A.Control,{type:"text",name:"address",value:N.address,onChange:je,required:!0})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyPhoneNumber",children:[(0,m.jsx)(d.A.Label,{children:"Phone Number"}),(0,m.jsx)(d.A.Control,{type:"text",name:"phoneNumber",value:N.phoneNumber,onChange:je,required:!0})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyWebsite",children:[(0,m.jsx)(d.A.Label,{children:"Website"}),(0,m.jsx)(d.A.Control,{type:"text",name:"website",value:N.website,onChange:je})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyDescription",children:[(0,m.jsx)(d.A.Label,{children:"Description"}),(0,m.jsx)(d.A.Control,{as:"textarea",name:"description",value:N.description,onChange:je})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyLogo",children:[(0,m.jsx)(d.A.Label,{children:"Company Logo"}),(0,m.jsx)(d.A.Control,{type:"file",name:"logoUrl",onChange:je})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanySocialMedia",children:[(0,m.jsx)(d.A.Label,{children:"Social Media"}),(0,m.jsx)(d.A.Control,{type:"text",name:"facebook",placeholder:"Facebook URL",value:(null===(e=N.socialMedia)||void 0===e?void 0:e.facebook)||"",onChange:be}),(0,m.jsx)(d.A.Control,{type:"text",name:"twitter",placeholder:"Twitter URL",value:(null===(a=N.socialMedia)||void 0===a?void 0:a.twitter)||"",onChange:be}),(0,m.jsx)(d.A.Control,{type:"text",name:"linkedin",placeholder:"LinkedIn URL",value:(null===(t=N.socialMedia)||void 0===t?void 0:t.linkedin)||"",onChange:be}),(0,m.jsx)(d.A.Control,{type:"text",name:"instagram",placeholder:"Instagram URL",value:(null===(p=N.socialMedia)||void 0===p?void 0:p.instagram)||"",onChange:be}),(0,m.jsx)(d.A.Control,{type:"text",name:"telegram",placeholder:"telegram URL",value:(null===(h=N.socialMedia)||void 0===h?void 0:h.telegram)||"",onChange:be})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyPromotionStartDate",children:[(0,m.jsx)(d.A.Label,{children:"Promotion Start Date"}),(0,m.jsx)(d.A.Control,{type:"date",name:"promotionStartDate",value:N.promotionStartDate?N.promotionStartDate.split("T")[0]:"",onChange:je})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyPromotionEndDate",children:[(0,m.jsx)(d.A.Label,{children:"Promotion End Date"}),(0,m.jsx)(d.A.Control,{type:"date",name:"promotionEndDate",value:N.promotionEndDate?N.promotionEndDate.split("T")[0]:"",onChange:je})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyPaymentDetails",children:[(0,m.jsx)(d.A.Label,{children:"Payment Details"}),(0,m.jsx)(d.A.Control,{type:"text",name:"paymentMethod",placeholder:"Payment Method",value:(null===(u=N.paymentDetails)||void 0===u?void 0:u.paymentMethod)||"",onChange:Ae}),(0,m.jsx)(d.A.Control,{type:"date",name:"paymentDate",placeholder:"Payment Date",value:N.paymentDate?N.paymentDate.split("T")[0]:"",onChange:Ae}),(0,m.jsx)(d.A.Control,{type:"number",name:"paymentAmount",placeholder:"Payment Amount",value:(null===(y=N.paymentDetails)||void 0===y?void 0:y.paymentAmount)||"",onChange:Ae})]}),(0,m.jsxs)(d.A.Group,{controlId:"formCompanyContactPerson",children:[(0,m.jsx)(d.A.Label,{children:"Contact Person"}),(0,m.jsx)(d.A.Control,{type:"text",name:"contactPersonName",placeholder:"Contact Person Name",value:(null===(x=N.contactPerson)||void 0===x?void 0:x.name)||"",onChange:e=>Ce(e,"name")}),(0,m.jsx)(d.A.Control,{type:"email",name:"contactPersonEmail",placeholder:"Contact Person Email",value:(null===(g=N.contactPerson)||void 0===g?void 0:g.email)||"",onChange:e=>Ce(e,"email")}),(0,m.jsx)(d.A.Control,{type:"text",name:"contactPersonPhone",placeholder:"Contact Person Phone Number",value:(null===(j=N.contactPerson)||void 0===j?void 0:j.phoneNumber)||"",onChange:e=>Ce(e,"phoneNumber")})]}),(0,m.jsxs)(c.A.Footer,{children:[(0,m.jsx)(i.A,{variant:"secondary",onClick:()=>U(!1),children:"Close"}),(0,m.jsx)(i.A,{variant:"primary",type:"submit",children:L?"Update Company":"Create Company"})]})]})})]}),(0,m.jsxs)(c.A,{show:G,onHide:()=>T(!1),children:[(0,m.jsx)(c.A.Header,{closeButton:!0,children:(0,m.jsx)(c.A.Title,{children:"Confirm Delete"})}),(0,m.jsx)(c.A.Body,{children:"Are you sure you want to delete this company?"}),(0,m.jsxs)(c.A.Footer,{children:[(0,m.jsx)(i.A,{variant:"secondary",onClick:()=>T(!1),children:"Cancel"}),(0,m.jsx)(i.A,{variant:"danger",onClick:async()=>{try{await n.A.delete(`/api/companies/${$}`,{headers:{Authorization:`Bearer ${pe}`}}),A(b.filter((e=>e._id!==$))),T(!1)}catch(e){console.error("Error deleting company",e)}},children:"Delete"})]})]})]}),(0,m.jsx)(l.A,{})]})}},449:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var o=t(579);const n=()=>(0,o.jsx)("footer",{className:"bg-blue-600 p-4 text-white text-center",children:(0,o.jsx)("p",{children:"\xa9 2024 Your Company. All rights reserved."})})},1460:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var o=t(579);const n=()=>(0,o.jsx)("nav",{className:"bg-blue-600 p-4 text-white",children:(0,o.jsx)("h1",{className:"text-lg font-bold",children:"Admin Dashboard"})})},1273:(e,a,t)=>{t.d(a,{A:()=>l});var o=t(5043),n=t(5475),r=t(3825),s=t(579);const l=()=>{const[e,a]=(0,o.useState)(!1),t=()=>{a(!e)};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{className:"lg:hidden text-black p-4 focus:outline-none",onClick:t,children:e?(0,s.jsx)(r.zhF,{size:24}):(0,s.jsx)(r.mu4,{size:24})}),(0,s.jsx)("div",{className:`fixed top-0 left-0 w-64 h-full bg-gray-800 text-white z-40 transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:relative lg:w-64 lg:transform-none`,children:(0,s.jsxs)("ul",{className:"space-y-6 p-4",children:[" ",(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"/dashboard",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Dashboard"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"/dashboard/admin",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Admin"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"/dashboard/category",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Categories"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"/dashboard/company",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Companies"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"/dashboard/promotion",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Promotion"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"#",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Payment"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.N_,{to:"#",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:t,children:"Report"})})]})}),e&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:t})]})}}}]);
//# sourceMappingURL=763.8eb10b35.chunk.js.map