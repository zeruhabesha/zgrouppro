"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[518],{9518:(e,t,r)=>{r.r(t),r.d(t,{default:()=>P});var n=r(5043),o=r(4282),s=r(8139),a=r.n(s),l=r(7852),i=r(579);const d=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:n,striped:o,bordered:s,borderless:d,hover:c,size:h,variant:u,responsive:x,...m}=e;const p=(0,l.oU)(r,"table"),j=a()(n,p,u&&`${p}-${u}`,h&&`${p}-${h}`,o&&`${p}-${"string"===typeof o?`striped-${o}`:"striped"}`,s&&`${p}-bordered`,d&&`${p}-borderless`,c&&`${p}-hover`),g=(0,i.jsx)("table",{...m,className:j,ref:t});if(x){let e=`${p}-responsive`;return"string"===typeof x&&(e=`${e}-${x}`),(0,i.jsx)("div",{className:e,children:g})}return g}));var c=r(5284),h=r(2462),u=r(6723),x=r(9109);const m=2**31-1;function p(e,t,r){const n=r-Date.now();e.current=n<=m?setTimeout(t,n):setTimeout((()=>p(e,t,r)),m)}function j(){const e=(0,u.A)(),t=(0,n.useRef)();return(0,x.A)((()=>clearTimeout(t.current))),(0,n.useMemo)((()=>{const r=()=>clearTimeout(t.current);return{set:function(n){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(r(),o<=m?t.current=setTimeout(n,o):p(t,n,Date.now()+o))},clear:r,handleRef:t}}),[])}var g=r(8062),A=r(8072);const f={[g.ns]:"showing",[g.ze]:"showing show"},b=n.forwardRef(((e,t)=>(0,i.jsx)(A.A,{...e,ref:t,transitionClasses:f})));b.displayName="ToastFade";const v=b;var y=r(1456),C=r(5632);const w=n.createContext({onClose(){}}),N=n.forwardRef(((e,t)=>{let{bsPrefix:r,closeLabel:o="Close",closeVariant:s,closeButton:d=!0,className:c,children:h,...u}=e;r=(0,l.oU)(r,"toast-header");const x=(0,n.useContext)(w),m=(0,y.A)((e=>{null==x||null==x.onClose||x.onClose(e)}));return(0,i.jsxs)("div",{ref:t,...u,className:a()(r,c),children:[h,d&&(0,i.jsx)(C.A,{"aria-label":o,variant:s,onClick:m,"data-dismiss":"toast"})]})}));N.displayName="ToastHeader";const D=N,k=n.forwardRef(((e,t)=>{let{className:r,bsPrefix:n,as:o="div",...s}=e;return n=(0,l.oU)(n,"toast-body"),(0,i.jsx)(o,{ref:t,className:a()(r,n),...s})}));k.displayName="ToastBody";const T=k,S=n.forwardRef(((e,t)=>{let{bsPrefix:r,className:o,transition:s=v,show:d=!0,animation:c=!0,delay:h=5e3,autohide:u=!1,onClose:x,onEntered:m,onExit:p,onExiting:g,onEnter:A,onEntering:f,onExited:b,bg:y,...C}=e;r=(0,l.oU)(r,"toast");const N=(0,n.useRef)(h),D=(0,n.useRef)(x);(0,n.useEffect)((()=>{N.current=h,D.current=x}),[h,x]);const k=j(),T=!(!u||!d),S=(0,n.useCallback)((()=>{T&&(null==D.current||D.current())}),[T]);(0,n.useEffect)((()=>{k.set(S,N.current)}),[k,S]);const E=(0,n.useMemo)((()=>({onClose:x})),[x]),L=!(!s||!c),$=(0,i.jsx)("div",{...C,ref:t,className:a()(r,o,y&&`bg-${y}`,!L&&(d?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,i.jsx)(w.Provider,{value:E,children:L&&s?(0,i.jsx)(s,{in:d,onEnter:A,onEntering:f,onEntered:m,onExit:p,onExiting:g,onExited:b,unmountOnExit:!0,children:$}):$})}));S.displayName="Toast";const E=Object.assign(S,{Body:T,Header:D});var L=r(6213),$=r(1460),I=r(449),G=r(1273);const P=()=>{const[e,t]=(0,n.useState)([]),[r,s]=(0,n.useState)(""),[a,l]=(0,n.useState)(1),[u]=(0,n.useState)(6),[x,m]=(0,n.useState)([]),[p,j]=(0,n.useState)(!1),[g,A]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),[v,y]=(0,n.useState)(!1),[C,w]=(0,n.useState)(""),[N,D]=(0,n.useState)(!1),[k,T]=(0,n.useState)(null),[S,P]=(0,n.useState)(null),U=localStorage.getItem("token"),q=async()=>{try{const e=await L.A.get("/api/promotions");t(e.data)}catch(e){console.error("Error fetching announcements:",e)}};(0,n.useEffect)((()=>{q()}),[]);const B=e.filter((e=>e.title.toLowerCase().includes(r.toLowerCase()))),R=a*u,z=R-u,M=B.slice(z,R),F=()=>{j(!1),A(!1),b(null),P(null)},_=e=>{const{name:t,value:r}=e.target;b({...f,[t]:r})},H=e=>{P(e.target.files[0])};return(0,i.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,i.jsx)($.A,{}),(0,i.jsxs)("div",{className:"flex flex-grow",children:[(0,i.jsx)(G.A,{}),(0,i.jsxs)("div",{className:"container mx-auto p-4",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Promotion Management"}),(0,i.jsx)(o.A,{variant:"primary",onClick:()=>A(!0),children:"Add Promotion"}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsx)("input",{type:"text",placeholder:"Search announcements...",value:r,onChange:e=>{const t=e.target.value||"";s(t),l(1)},className:"px-4 py-2 border rounded w-full"})}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,i.jsxs)(d,{striped:!0,bordered:!0,hover:!0,className:"mt-4",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Title"}),(0,i.jsx)("th",{children:"Description"}),(0,i.jsx)("th",{children:"Media"}),(0,i.jsx)("th",{children:"Media Type"}),(0,i.jsx)("th",{children:"Target URL"}),(0,i.jsx)("th",{children:"Start Date"}),(0,i.jsx)("th",{children:"End Date"}),(0,i.jsx)("th",{children:"Status"}),(0,i.jsx)("th",{children:"Actions"})]})}),(0,i.jsx)("tbody",{children:M.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.title}),(0,i.jsx)("td",{children:e.description}),(0,i.jsx)("td",{children:e.media&&(0,i.jsx)("img",{src:`/${e.media}`,className:"w-10 h-10 object-cover rounded-lg mb-4",alt:e.title})}),(0,i.jsx)("td",{children:e.mediaType}),(0,i.jsx)("td",{children:e.targetUrl}),(0,i.jsx)("td",{children:new Date(e.startDate).toLocaleDateString()}),(0,i.jsx)("td",{children:new Date(e.endDate).toLocaleDateString()}),(0,i.jsx)("td",{children:e.status}),(0,i.jsxs)("td",{children:[(0,i.jsx)(o.A,{variant:"warning",onClick:()=>(b(e),void j(!0)),children:"Edit"}),(0,i.jsx)(o.A,{variant:"danger",onClick:()=>{T(e._id),D(!0)},children:"Delete"})]})]},e.id)))})]})}),(0,i.jsx)("div",{className:"flex justify-center mt-4",children:Array.from({length:Math.ceil(B.length/u)},((e,t)=>(0,i.jsx)("button",{onClick:()=>{l(t+1)},className:`px-4 py-2 mx-1 ${a===t+1?"bg-blue-600 text-white":"bg-gray-300 text-gray-800"} rounded hover:bg-blue-700 transition duration-300`,children:t+1},t+1)))}),(0,i.jsxs)(c.A,{show:p,onHide:F,children:[(0,i.jsx)(c.A.Header,{closeButton:!0,children:(0,i.jsx)(c.A.Title,{children:"Update Promotion"})}),(0,i.jsx)(c.A.Body,{children:f&&(0,i.jsxs)(h.A,{onSubmit:async e=>{if(e.preventDefault(),!f)return;const t=new FormData;Object.keys(f).forEach((e=>t.append(e,f[e]))),S&&t.append("file",S);try{await L.A.put(`/api/promotions/${f._id}`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${U}`}}),q(),F(),w("Promotion updated successfully"),y(!0)}catch(r){console.error("Error updating promotion:",r),w("Error updating promotion"),y(!0)}},children:[(0,i.jsxs)(h.A.Group,{controlId:"formTitle",children:[(0,i.jsx)(h.A.Label,{children:"Title"}),(0,i.jsx)(h.A.Control,{type:"text",name:"title",value:f.title||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formDescription",children:[(0,i.jsx)(h.A.Label,{children:"Description"}),(0,i.jsx)(h.A.Control,{as:"textarea",name:"description",value:f.description||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formMediaType",children:[(0,i.jsx)(h.A.Label,{children:"Media Type"}),(0,i.jsx)(h.A.Control,{type:"text",name:"mediaType",value:f.mediaType||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formTargetUrl",children:[(0,i.jsx)(h.A.Label,{children:"Target URL"}),(0,i.jsx)(h.A.Control,{type:"url",name:"targetUrl",value:f.targetUrl||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formStartDate",children:[(0,i.jsx)(h.A.Label,{children:"Start Date"}),(0,i.jsx)(h.A.Control,{type:"date",name:"startDate",value:f.startDate?f.startDate.split("T")[0]:"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formEndDate",children:[(0,i.jsx)(h.A.Label,{children:"End Date"}),(0,i.jsx)(h.A.Control,{type:"date",name:"endDate",value:f.endDate?f.endDate.split("T")[0]:"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formStatus",children:[(0,i.jsx)(h.A.Label,{children:"Status"}),(0,i.jsx)(h.A.Control,{type:"text",name:"status",value:f.status||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formFile",children:[(0,i.jsx)(h.A.Label,{children:"File"}),(0,i.jsx)(h.A.Control,{type:"file",name:"file",onChange:H})]}),(0,i.jsx)(o.A,{variant:"primary",type:"submit",children:"Save Changes"})]})})]}),(0,i.jsxs)(c.A,{show:g,onHide:F,children:[(0,i.jsx)(c.A.Header,{closeButton:!0,children:(0,i.jsx)(c.A.Title,{children:"Add Promotion"})}),(0,i.jsx)(c.A.Body,{children:(0,i.jsxs)(h.A,{onSubmit:async e=>{if(e.preventDefault(),!f)return;const t=new FormData;for(const n in f)f[n]&&t.append(n,f[n]);S&&t.append("file",S);try{await L.A.post("/api/promotions",t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${U}`}}),q(),F(),w("Promotion added successfully"),y(!0)}catch(r){console.error("Error adding promotion:",r),w("Error adding promotion"),y(!0)}},children:[(0,i.jsxs)(h.A.Group,{controlId:"formTitle",children:[(0,i.jsx)(h.A.Label,{children:"Title"}),(0,i.jsx)(h.A.Control,{type:"text",name:"title",value:(null===f||void 0===f?void 0:f.title)||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formDescription",children:[(0,i.jsx)(h.A.Label,{children:"Description"}),(0,i.jsx)(h.A.Control,{as:"textarea",name:"description",value:(null===f||void 0===f?void 0:f.description)||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formMediaType",children:[(0,i.jsx)(h.A.Label,{children:"Media Type"}),(0,i.jsx)(h.A.Control,{type:"text",name:"mediaType",value:(null===f||void 0===f?void 0:f.mediaType)||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formTargetUrl",children:[(0,i.jsx)(h.A.Label,{children:"Target URL"}),(0,i.jsx)(h.A.Control,{type:"url",name:"targetUrl",value:(null===f||void 0===f?void 0:f.targetUrl)||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formStartDate",children:[(0,i.jsx)(h.A.Label,{children:"Start Date"}),(0,i.jsx)(h.A.Control,{type:"date",name:"startDate",value:null!==f&&void 0!==f&&f.startDate?f.startDate.split("T")[0]:"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formEndDate",children:[(0,i.jsx)(h.A.Label,{children:"End Date"}),(0,i.jsx)(h.A.Control,{type:"date",name:"endDate",value:null!==f&&void 0!==f&&f.endDate?f.endDate.split("T")[0]:"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formStatus",children:[(0,i.jsx)(h.A.Label,{children:"Status"}),(0,i.jsx)(h.A.Control,{type:"text",name:"status",value:(null===f||void 0===f?void 0:f.status)||"",onChange:_,required:!0})]}),(0,i.jsxs)(h.A.Group,{controlId:"formFile",children:[(0,i.jsx)(h.A.Label,{children:"File"}),(0,i.jsx)(h.A.Control,{type:"file",name:"file",onChange:H})]}),(0,i.jsx)(o.A,{variant:"primary",type:"submit",children:"Add Promotion"})]})})]}),(0,i.jsxs)(c.A,{show:N,onHide:()=>D(!1),children:[(0,i.jsx)(c.A.Header,{closeButton:!0,children:(0,i.jsx)(c.A.Title,{children:"Confirm Delete"})}),(0,i.jsx)(c.A.Body,{children:"Are you sure you want to delete this promotion?"}),(0,i.jsxs)(c.A.Footer,{children:[(0,i.jsx)(o.A,{variant:"secondary",onClick:()=>D(!1),children:"Cancel"}),(0,i.jsx)(o.A,{variant:"danger",onClick:async()=>{try{await L.A.delete(`/api/promotions/${k}`,{headers:{Authorization:`Bearer ${U}`}}),q(),w("Promotion deleted successfully"),y(!0),F()}catch(e){console.error("Error deleting promotion:",e),w("Error deleting promotion"),y(!0)}},children:"Delete"})]})]}),(0,i.jsx)(E,{show:v,onClose:()=>y(!1),style:{position:"absolute",bottom:"20px",right:"20px"},children:(0,i.jsx)(E.Body,{children:C})})]})]}),(0,i.jsx)(I.A,{})]})}},449:(e,t,r)=>{r.d(t,{A:()=>o});r(5043);var n=r(579);const o=()=>(0,n.jsx)("footer",{className:"bg-blue-600 p-4 text-white text-center",children:(0,n.jsx)("p",{children:"\xa9 2024 Your Company. All rights reserved."})})},1460:(e,t,r)=>{r.d(t,{A:()=>o});r(5043);var n=r(579);const o=()=>(0,n.jsx)("nav",{className:"bg-blue-600 p-4 text-white",children:(0,n.jsx)("h1",{className:"text-lg font-bold",children:"Admin Dashboard"})})},1273:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(5043),o=r(5475),s=r(3825),a=r(579);const l=()=>{const[e,t]=(0,n.useState)(!1),r=()=>{t(!e)};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{className:"lg:hidden text-black p-4 focus:outline-none",onClick:r,children:e?(0,a.jsx)(s.zhF,{size:24}):(0,a.jsx)(s.mu4,{size:24})}),(0,a.jsx)("div",{className:`fixed top-0 left-0 w-64 h-full bg-gray-800 text-white z-40 transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0 lg:relative lg:w-64 lg:transform-none`,children:(0,a.jsxs)("ul",{className:"space-y-6 p-4",children:[" ",(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"/dashboard",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Dashboard"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"/dashboard/admin",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Admin"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"/dashboard/category",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Categories"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"/dashboard/company",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Companies"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"/dashboard/promotion",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Promotion"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"#",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Payment"})}),(0,a.jsx)("li",{children:(0,a.jsx)(o.N_,{to:"#",className:"block px-4 py-2 no-underline text-white hover:bg-black transition-colors duration-300",onClick:r,children:"Report"})})]})}),e&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30 lg:hidden",onClick:r})]})}}}]);
//# sourceMappingURL=518.1f0537d3.chunk.js.map